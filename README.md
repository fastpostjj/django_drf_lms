## Бэкенд часть SPA приложения - LMS-система

### Реализованы модели урока и курса
Для них реализован CRUD. Для курса через ViewSets, а для урока через Generic-классы.

Для работы контроллеров реализованы сериализаторы.

Для модели курса в сериализатор  добавлено поле вывода количества уроков.
Эндпоинты курса и урока закрыты для неавторизованных пользователей.

Для уроков реализована дополнительная проверка на отсутствие в материалах ссылок на сторонние ресурсы, кроме youtube.com.

### Реализованы модель платежа за урок или за курс

### Реализована модель пользователя с авторизацей по email

### Реализована модель подписки на курс
При обновлении курса подписанным пользователям приходит уведомление на почту

Модераторы (со статусом is_staff=True) могут просматривать любые уроки или курсы, но без возможности их удалять и создавать новые.
Пользователи, которые не входят в группу модераторов, могут видеть и редактировать только свои курсы и уроки.

Для пользователя реализован вывод платежей этого пользователя

Для вывода всех уроков, курсов и подписок реализована пагинация.

### Реализована интеграция с сервисом stripe
-   для создания платежного намерения необходимо на эндпоинт /payment/create/ отправить post-запрос, содержащий id курса или урока. Если в запросе будет и курс и урок, то в приоритете будет курс.

    {
        "lesson":4
    } или {
        "curs":4
    }

-   для создания или обновления платежного метода для текущего пользователя на эндпоинт /payment/paying_methods/create/ необходимо отправить put-запрос. Id платежного метода добавится в модель пользователя. Платежный метод может использоваться для оплаты только один раз. Для следующего платежа его нужно обновить.

-   для подтверждения платежа необходимо на эндпоинт /payment/payings/confirm/ отправить post-запрос, содержащий id платежа:
{
    "id":9
}
Платеж будет подтвержден для текущего пользователя при наличии у него payment_methods, который еще не был использован для оплаты.

Статус платежа будет проверятся периодической задачей автоматически. Аналогичная задача запускается командой:

__python manage.py check_status__

Задача для проверки последнего входа пользователей (блокируются пользователи, которые не заходили больше месяца):

__python manage.py check_login__

Эта задача неактивна.

Пользователи, создающиеся по команде __python manage.py csu__:

-   админ -
admin@admin.pro

-   стафф:
    manager@manager.ru

-   пользователь:
    user@user.ru

    Пароль для всех одинаковый:
    123abc123